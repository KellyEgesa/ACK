{"ast":null,"code":"import _regeneratorRuntime from\"/home/kellyegesa/Desktop/ack/ack/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/kellyegesa/Desktop/ack/ack/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/home/kellyegesa/Desktop/ack/ack/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/kellyegesa/Desktop/ack/ack/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/kellyegesa/Desktop/ack/ack/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/kellyegesa/Desktop/ack/ack/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import Maintable from\"../common/maintable\";import{getService,deleteWorshippers}from\"../common/Worshippers\";import{toast}from\"react-toastify\";var WorshipperTable=/*#__PURE__*/function(_Component){_inherits(WorshipperTable,_Component);var _super=_createSuper(WorshipperTable);function WorshipperTable(){var _this;_classCallCheck(this,WorshipperTable);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={worshippers:[]};_this.handleDeleteWorshippers=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(worshipper){var originalWorshipper,worshippers;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:originalWorshipper=_this.state.worshippers;worshippers=originalWorshipper.filter(function(s){return s._id!==worshipper._id;});_this.setState({worshippers:worshippers});_context.prev=3;_context.next=6;return deleteWorshippers(worshipper._id);case 6:toast.success(\"deleted\");_context.next=13;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](3);if(_context.t0.response&&_context.t0.response.status===404)toast.error(\"This person has been already deleted\");_this.setState({worshippers:originalWorshipper});case 13:case\"end\":return _context.stop();}}},_callee,null,[[3,9]]);}));return function(_x){return _ref.apply(this,arguments);};}();_this.handleBack=function(){_this.props.history.push(\"/Dashboard\");};return _this;}_createClass(WorshipperTable,[{key:\"handleData\",value:function(){var _handleData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var _yield$getService,worshippers;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return getService(this.props.match.params.id);case 2:_yield$getService=_context2.sent;worshippers=_yield$getService.data;this.setState({worshippers:worshippers});case 5:case\"end\":return _context2.stop();}}},_callee2,this);}));function handleData(){return _handleData.apply(this,arguments);}return handleData;}()},{key:\"componentWillUnmount\",value:function componentWillUnmount(){this.setState=function(state,callback){return;};}},{key:\"render\",value:function render(){this.handleData();return/*#__PURE__*/React.createElement(\"div\",{className:\"col-m\"},/*#__PURE__*/React.createElement(Maintable,{items:this.state.worshippers,toDelete:this.handleDeleteWorshippers,goBack:this.handleBack}));}}]);return WorshipperTable;}(Component);export default WorshipperTable;","map":{"version":3,"sources":["/home/kellyegesa/Desktop/ack/ack/src/compoments/Worshippers.jsx"],"names":["React","Component","Maintable","getService","deleteWorshippers","toast","WorshipperTable","state","worshippers","handleDeleteWorshippers","worshipper","originalWorshipper","filter","s","_id","setState","success","response","status","error","handleBack","props","history","push","match","params","id","data","callback","handleData"],"mappings":"u3BAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,MAAOC,CAAAA,SAAP,KAAsB,qBAAtB,CACA,OAASC,UAAT,CAAqBC,iBAArB,KAA8C,uBAA9C,CACA,OAASC,KAAT,KAAsB,gBAAtB,C,GAEMC,CAAAA,e,+VACJC,K,CAAQ,CAAEC,WAAW,CAAE,EAAf,C,OAURC,uB,0FAA0B,iBAAOC,UAAP,qJAClBC,kBADkB,CACG,MAAKJ,KAAL,CAAWC,WADd,CAElBA,WAFkB,CAEJG,kBAAkB,CAACC,MAAnB,CAClB,SAACC,CAAD,QAAOA,CAAAA,CAAC,CAACC,GAAF,GAAUJ,UAAU,CAACI,GAA5B,EADkB,CAFI,CAKxB,MAAKC,QAAL,CAAc,CAAEP,WAAW,CAAXA,WAAF,CAAd,EALwB,sCAQhBJ,CAAAA,iBAAiB,CAACM,UAAU,CAACI,GAAZ,CARD,QAStBT,KAAK,CAACW,OAAN,CAAc,SAAd,EATsB,+EAWtB,GAAI,YAAGC,QAAH,EAAe,YAAGA,QAAH,CAAYC,MAAZ,GAAuB,GAA1C,CACEb,KAAK,CAACc,KAAN,CAAY,sCAAZ,EAEF,MAAKJ,QAAL,CAAc,CAAEP,WAAW,CAAEG,kBAAf,CAAd,EAdsB,oE,qEAiB1BS,U,CAAa,UAAM,CACjB,MAAKC,KAAL,CAAWC,OAAX,CAAmBC,IAAnB,CAAwB,YAAxB,EACD,C,yVA3BqCpB,CAAAA,UAAU,CAAC,KAAKkB,KAAL,CAAWG,KAAX,CAAiBC,MAAjB,CAAwBC,EAAzB,C,yCAAhClB,W,mBAANmB,I,CACR,KAAKZ,QAAL,CAAc,CAAEP,WAAW,CAAXA,WAAF,CAAd,E,wNAEqB,CACrB,KAAKO,QAAL,CAAgB,SAACR,KAAD,CAAQqB,QAAR,CAAqB,CACnC,OACD,CAFD,CAGD,C,uCAqBQ,CACP,KAAKC,UAAL,GACA,mBACE,2BAAK,SAAS,CAAC,OAAf,eACE,oBAAC,SAAD,EACE,KAAK,CAAE,KAAKtB,KAAL,CAAWC,WADpB,CAEE,QAAQ,CAAE,KAAKC,uBAFjB,CAGE,MAAM,CAAE,KAAKW,UAHf,EADF,CADF,CASD,C,6BA1C2BnB,S,EA6C9B,cAAeK,CAAAA,eAAf","sourcesContent":["import React, { Component } from \"react\";\nimport Maintable from \"../common/maintable\";\nimport { getService, deleteWorshippers } from \"../common/Worshippers\";\nimport { toast } from \"react-toastify\";\n\nclass WorshipperTable extends Component {\n  state = { worshippers: [] };\n  async handleData() {\n    const { data: worshippers } = await getService(this.props.match.params.id);\n    this.setState({ worshippers });\n  }\n  componentWillUnmount() {\n    this.setState = (state, callback) => {\n      return;\n    };\n  }\n  handleDeleteWorshippers = async (worshipper) => {\n    const originalWorshipper = this.state.worshippers;\n    const worshippers = originalWorshipper.filter(\n      (s) => s._id !== worshipper._id\n    );\n    this.setState({ worshippers });\n\n    try {\n      await deleteWorshippers(worshipper._id);\n      toast.success(\"deleted\");\n    } catch (ex) {\n      if (ex.response && ex.response.status === 404)\n        toast.error(\"This person has been already deleted\");\n\n      this.setState({ worshippers: originalWorshipper });\n    }\n  };\n  handleBack = () => {\n    this.props.history.push(\"/Dashboard\");\n  };\n  render() {\n    this.handleData();\n    return (\n      <div className=\"col-m\">\n        <Maintable\n          items={this.state.worshippers}\n          toDelete={this.handleDeleteWorshippers}\n          goBack={this.handleBack}\n        />\n      </div>\n    );\n  }\n}\n\nexport default WorshipperTable;\n"]},"metadata":{},"sourceType":"module"}