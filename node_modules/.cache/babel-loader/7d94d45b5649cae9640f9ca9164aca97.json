{"ast":null,"code":"import _regeneratorRuntime from\"/home/kellyegesa/Desktop/Projects/ack_stpeters/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/kellyegesa/Desktop/Projects/ack_stpeters/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/home/kellyegesa/Desktop/Projects/ack_stpeters/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/kellyegesa/Desktop/Projects/ack_stpeters/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/kellyegesa/Desktop/Projects/ack_stpeters/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/kellyegesa/Desktop/Projects/ack_stpeters/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from\"react\";import Joi from\"joi-browser\";import Form from\"../common/form\";import{checkUser}from\"../service/userService\";import{toast}from\"react-toastify\";var LoginForm=/*#__PURE__*/function(_Form){_inherits(LoginForm,_Form);var _super=_createSuper(LoginForm);function LoginForm(){var _this;_classCallCheck(this,LoginForm);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={data:{name:\"\",password:\"\"},errors:{}};_this.schema={name:Joi.string().required().label(\"Username\"),password:Joi.string().required().label(\"Password\")};_this.goBack=function(){_this.props.history.push(\"/\");};_this.doSubmit=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _yield$checkUser,jwt;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return checkUser(_this.state.data);case 3:_yield$checkUser=_context.sent;jwt=_yield$checkUser.data;localStorage.setItem(\"token\",jwt);window.location=\"/Dashboard\";_context.next=12;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](0);if(_context.t0.response&&_context.t0.response.status===400)toast.error(_context.t0.response.data);case 12:case\"end\":return _context.stop();}}},_callee,null,[[0,9]]);}));return _this;}_createClass(LoginForm,[{key:\"render\",value:function render(){var _this2=this;return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h1\",null,\"Log In\"),/*#__PURE__*/React.createElement(\"form\",{onSubmit:this.handleSubmit},this.renderInput(\"name\",\"Username\"),this.renderInput(\"password\",\"Password\",\"password\"),this.renderButton(\"Login\"),/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-primary m-2\",onClick:function onClick(){return _this2.goBack();}},\"BACK\")));}}]);return LoginForm;}(Form);export default LoginForm;","map":{"version":3,"sources":["/home/kellyegesa/Desktop/Projects/ack_stpeters/src/compoments/login.jsx"],"names":["React","Joi","Form","checkUser","toast","LoginForm","state","data","name","password","errors","schema","string","required","label","goBack","props","history","push","doSubmit","jwt","localStorage","setItem","window","location","response","status","error","handleSubmit","renderInput","renderButton"],"mappings":"28BAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,GAAP,KAAgB,aAAhB,CACA,MAAOC,CAAAA,IAAP,KAAiB,gBAAjB,CACA,OAASC,SAAT,KAA0B,wBAA1B,CACA,OAASC,KAAT,KAAsB,gBAAtB,C,GAEMC,CAAAA,S,6TACJC,K,CAAQ,CACNC,IAAI,CAAE,CAAEC,IAAI,CAAE,EAAR,CAAYC,QAAQ,CAAE,EAAtB,CADA,CAENC,MAAM,CAAE,EAFF,C,OAIRC,M,CAAS,CACPH,IAAI,CAAEP,GAAG,CAACW,MAAJ,GAAaC,QAAb,GAAwBC,KAAxB,CAA8B,UAA9B,CADC,CAEPL,QAAQ,CAAER,GAAG,CAACW,MAAJ,GAAaC,QAAb,GAAwBC,KAAxB,CAA8B,UAA9B,CAFH,C,OAITC,M,CAAS,UAAM,CACb,MAAKC,KAAL,CAAWC,OAAX,CAAmBC,IAAnB,CAAwB,GAAxB,EACD,C,OACDC,Q,sEAAW,kMAEqBhB,CAAAA,SAAS,CAAC,MAAKG,KAAL,CAAWC,IAAZ,CAF9B,uCAEOa,GAFP,kBAECb,IAFD,CAGPc,YAAY,CAACC,OAAb,CAAqB,OAArB,CAA8BF,GAA9B,EACAG,MAAM,CAACC,QAAP,CAAkB,YAAlB,CAJO,+EAMP,GAAI,YAAGC,QAAH,EAAe,YAAGA,QAAH,CAAYC,MAAZ,GAAuB,GAA1C,CACEtB,KAAK,CAACuB,KAAN,CAAY,YAAGF,QAAH,CAAYlB,IAAxB,EAPK,oE,8EAWF,iBACP,mBACE,4CACE,uCADF,cAEE,4BAAM,QAAQ,CAAE,KAAKqB,YAArB,EACG,KAAKC,WAAL,CAAiB,MAAjB,CAAyB,UAAzB,CADH,CAEG,KAAKA,WAAL,CAAiB,UAAjB,CAA6B,UAA7B,CAAyC,UAAzC,CAFH,CAGG,KAAKC,YAAL,CAAkB,OAAlB,CAHH,cAIE,8BAAQ,SAAS,CAAC,qBAAlB,CAAwC,OAAO,CAAE,yBAAM,CAAA,MAAI,CAACf,MAAL,EAAN,EAAjD,SAJF,CAFF,CADF,CAaD,C,uBArCqBb,I,EAwCxB,cAAeG,CAAAA,SAAf","sourcesContent":["import React from \"react\";\nimport Joi from \"joi-browser\";\nimport Form from \"../common/form\";\nimport { checkUser } from \"../service/userService\";\nimport { toast } from \"react-toastify\";\n\nclass LoginForm extends Form {\n  state = {\n    data: { name: \"\", password: \"\" },\n    errors: {},\n  };\n  schema = {\n    name: Joi.string().required().label(\"Username\"),\n    password: Joi.string().required().label(\"Password\"),\n  };\n  goBack = () => {\n    this.props.history.push(\"/\");\n  };\n  doSubmit = async () => {\n    try {\n      const { data: jwt } = await checkUser(this.state.data);\n      localStorage.setItem(\"token\", jwt);\n      window.location = \"/Dashboard\";\n    } catch (ex) {\n      if (ex.response && ex.response.status === 400)\n        toast.error(ex.response.data);\n    }\n  };\n\n  render() {\n    return (\n      <div>\n        <h1>Log In</h1>\n        <form onSubmit={this.handleSubmit}>\n          {this.renderInput(\"name\", \"Username\")}\n          {this.renderInput(\"password\", \"Password\", \"password\")}\n          {this.renderButton(\"Login\")}\n          <button className=\"btn btn-primary m-2\" onClick={() => this.goBack()}>\n            BACK\n          </button>\n        </form>\n      </div>\n    );\n  }\n}\n\nexport default LoginForm;\n"]},"metadata":{},"sourceType":"module"}