{"ast":null,"code":"var _jsxFileName = \"/home/kellyegesa/Desktop/Projects/ack_stpeters/src/compoments/login.jsx\";\nimport React from \"react\";\nimport Joi from \"joi-browser\";\nimport Form from \"../common/form\";\nimport { checkUser } from \"../service/userService\";\nimport { toast } from \"react-toastify\";\n\nclass LoginForm extends Form {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      data: {\n        name: \"\",\n        password: \"\"\n      },\n      errors: {}\n    };\n    this.schema = {\n      name: Joi.string().required().label(\"Username\"),\n      password: Joi.string().required().label(\"Password\")\n    };\n\n    this.goBack = () => {\n      this.props.history.push(\"/Dashboard\");\n    };\n\n    this.doSubmit = async () => {\n      try {\n        const {\n          data: jwt\n        } = await checkUser(this.state.data);\n        localStorage.setItem(\"token\", jwt);\n        window.location(\"/Dashboard\");\n      } catch (ex) {\n        if (ex.response && ex.response.status === 400) toast.error(ex.response.data);\n      }\n    };\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 32,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"h1\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 33,\n        columnNumber: 9\n      }\n    }, \"Log In\"), /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: this.handleSubmit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 34,\n        columnNumber: 9\n      }\n    }, this.renderInput(\"name\", \"Username\"), this.renderInput(\"password\", \"Password\", \"password\"), this.renderButton(\"Login\"), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"btn btn-primary m-2\",\n      onClick: () => this.goBack(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 38,\n        columnNumber: 11\n      }\n    }, \"BACK\")));\n  }\n\n}\n\nexport default LoginForm;","map":{"version":3,"sources":["/home/kellyegesa/Desktop/Projects/ack_stpeters/src/compoments/login.jsx"],"names":["React","Joi","Form","checkUser","toast","LoginForm","state","data","name","password","errors","schema","string","required","label","goBack","props","history","push","doSubmit","jwt","localStorage","setItem","window","location","ex","response","status","error","render","handleSubmit","renderInput","renderButton"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,GAAP,MAAgB,aAAhB;AACA,OAAOC,IAAP,MAAiB,gBAAjB;AACA,SAASC,SAAT,QAA0B,wBAA1B;AACA,SAASC,KAAT,QAAsB,gBAAtB;;AAEA,MAAMC,SAAN,SAAwBH,IAAxB,CAA6B;AAAA;AAAA;AAAA,SAC3BI,KAD2B,GACnB;AACNC,MAAAA,IAAI,EAAE;AAAEC,QAAAA,IAAI,EAAE,EAAR;AAAYC,QAAAA,QAAQ,EAAE;AAAtB,OADA;AAENC,MAAAA,MAAM,EAAE;AAFF,KADmB;AAAA,SAK3BC,MAL2B,GAKlB;AACPH,MAAAA,IAAI,EAAEP,GAAG,CAACW,MAAJ,GAAaC,QAAb,GAAwBC,KAAxB,CAA8B,UAA9B,CADC;AAEPL,MAAAA,QAAQ,EAAER,GAAG,CAACW,MAAJ,GAAaC,QAAb,GAAwBC,KAAxB,CAA8B,UAA9B;AAFH,KALkB;;AAAA,SAS3BC,MAT2B,GASlB,MAAM;AACb,WAAKC,KAAL,CAAWC,OAAX,CAAmBC,IAAnB,CAAwB,YAAxB;AACD,KAX0B;;AAAA,SAY3BC,QAZ2B,GAYhB,YAAY;AACrB,UAAI;AACF,cAAM;AAAEZ,UAAAA,IAAI,EAAEa;AAAR,YAAgB,MAAMjB,SAAS,CAAC,KAAKG,KAAL,CAAWC,IAAZ,CAArC;AACAc,QAAAA,YAAY,CAACC,OAAb,CAAqB,OAArB,EAA8BF,GAA9B;AACAG,QAAAA,MAAM,CAACC,QAAP,CAAgB,YAAhB;AACD,OAJD,CAIE,OAAOC,EAAP,EAAW;AACX,YAAIA,EAAE,CAACC,QAAH,IAAeD,EAAE,CAACC,QAAH,CAAYC,MAAZ,KAAuB,GAA1C,EACEvB,KAAK,CAACwB,KAAN,CAAYH,EAAE,CAACC,QAAH,CAAYnB,IAAxB;AACH;AACF,KArB0B;AAAA;;AAuB3BsB,EAAAA,MAAM,GAAG;AACP,wBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADF,eAEE;AAAM,MAAA,QAAQ,EAAE,KAAKC,YAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACG,KAAKC,WAAL,CAAiB,MAAjB,EAAyB,UAAzB,CADH,EAEG,KAAKA,WAAL,CAAiB,UAAjB,EAA6B,UAA7B,EAAyC,UAAzC,CAFH,EAGG,KAAKC,YAAL,CAAkB,OAAlB,CAHH,eAIE;AAAQ,MAAA,SAAS,EAAC,qBAAlB;AAAwC,MAAA,OAAO,EAAE,MAAM,KAAKjB,MAAL,EAAvD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAJF,CAFF,CADF;AAaD;;AArC0B;;AAwC7B,eAAeV,SAAf","sourcesContent":["import React from \"react\";\nimport Joi from \"joi-browser\";\nimport Form from \"../common/form\";\nimport { checkUser } from \"../service/userService\";\nimport { toast } from \"react-toastify\";\n\nclass LoginForm extends Form {\n  state = {\n    data: { name: \"\", password: \"\" },\n    errors: {},\n  };\n  schema = {\n    name: Joi.string().required().label(\"Username\"),\n    password: Joi.string().required().label(\"Password\"),\n  };\n  goBack = () => {\n    this.props.history.push(\"/Dashboard\");\n  };\n  doSubmit = async () => {\n    try {\n      const { data: jwt } = await checkUser(this.state.data);\n      localStorage.setItem(\"token\", jwt);\n      window.location(\"/Dashboard\");\n    } catch (ex) {\n      if (ex.response && ex.response.status === 400)\n        toast.error(ex.response.data);\n    }\n  };\n\n  render() {\n    return (\n      <div>\n        <h1>Log In</h1>\n        <form onSubmit={this.handleSubmit}>\n          {this.renderInput(\"name\", \"Username\")}\n          {this.renderInput(\"password\", \"Password\", \"password\")}\n          {this.renderButton(\"Login\")}\n          <button className=\"btn btn-primary m-2\" onClick={() => this.goBack()}>\n            BACK\n          </button>\n        </form>\n      </div>\n    );\n  }\n}\n\nexport default LoginForm;\n"]},"metadata":{},"sourceType":"module"}