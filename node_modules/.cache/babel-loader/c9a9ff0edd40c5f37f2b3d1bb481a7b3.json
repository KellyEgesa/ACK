{"ast":null,"code":"import _regeneratorRuntime from\"/home/kellyegesa/Desktop/ack/ack/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/kellyegesa/Desktop/ack/ack/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/home/kellyegesa/Desktop/ack/ack/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/kellyegesa/Desktop/ack/ack/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/kellyegesa/Desktop/ack/ack/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/kellyegesa/Desktop/ack/ack/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import{deleteService,getService}from\"../common/Service\";import{toast}from\"react-toastify\";var DeleteService=/*#__PURE__*/function(_Component){_inherits(DeleteService,_Component);var _super=_createSuper(DeleteService);function DeleteService(){var _this;_classCallCheck(this,DeleteService);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={service:[]};_this.handleDeleteService=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(services){var originalService,service;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:originalService=_this.state.service;service=originalService.filter(function(s){return s._id!==services._id;});_this.setState({service:service});_context.prev=3;_context.next=6;return deleteService(services._id);case 6:toast.success(\"This Service has been deleted\");_context.next=14;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](3);if(_context.t0.response&&_context.t0.response.status===404)toast.error(\"This Service has been already deleted\");if(_context.t0.response&&_context.t0.response.status===400)toast.error(_context.t0.response.data);_this.setState({service:originalService});case 14:case\"end\":return _context.stop();}}},_callee,null,[[3,9]]);}));return function(_x){return _ref.apply(this,arguments);};}();_this.handleBack=function(){_this.props.history.push(\"/Dashboard\");};return _this;}_createClass(DeleteService,[{key:\"componentDidMount\",value:function(){var _componentDidMount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var _yield$getService,service;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return getService();case 2:_yield$getService=_context2.sent;service=_yield$getService.data;this.setState({service:service});case 5:case\"end\":return _context2.stop();}}},_callee2,this);}));function componentDidMount(){return _componentDidMount.apply(this,arguments);}return componentDidMount;}()},{key:\"render\",value:function render(){var _this2=this;return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-primary m-2\",onClick:function onClick(){return _this2.handleBack();}},\"BACK\"),/*#__PURE__*/React.createElement(\"table\",{className:\"table\"},/*#__PURE__*/React.createElement(\"thead\",null,/*#__PURE__*/React.createElement(\"tr\",null,/*#__PURE__*/React.createElement(\"th\",null,\"Service\"),/*#__PURE__*/React.createElement(\"th\",null,\"Time\"),/*#__PURE__*/React.createElement(\"th\",null,\"Seats Available\"),/*#__PURE__*/React.createElement(\"th\",null,\"Delete\"))),/*#__PURE__*/React.createElement(\"tbody\",null,this.state.service.map(function(service){return/*#__PURE__*/React.createElement(\"tr\",{key:service._id},/*#__PURE__*/React.createElement(\"td\",null,service.name),/*#__PURE__*/React.createElement(\"td\",null,service.time),/*#__PURE__*/React.createElement(\"td\",null,service.seatsLeft),/*#__PURE__*/React.createElement(\"td\",null,/*#__PURE__*/React.createElement(\"button\",{className:\"btn btn-danger\",onClick:function onClick(){return _this2.handleDeleteService(service);}},\"Delete\")));}))));}}]);return DeleteService;}(Component);export default DeleteService;","map":{"version":3,"sources":["/home/kellyegesa/Desktop/ack/ack/src/compoments/deleteService.jsx"],"names":["React","Component","deleteService","getService","toast","DeleteService","state","service","handleDeleteService","services","originalService","filter","s","_id","setState","success","response","status","error","data","handleBack","props","history","push","map","name","time","seatsLeft"],"mappings":"u3BAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,OAASC,aAAT,CAAwBC,UAAxB,KAA0C,mBAA1C,CACA,OAASC,KAAT,KAAsB,gBAAtB,C,GAEMC,CAAAA,a,uVACJC,K,CAAQ,CAAEC,OAAO,CAAE,EAAX,C,OAMRC,mB,0FAAsB,iBAAOC,QAAP,8IACdC,eADc,CACI,MAAKJ,KAAL,CAAWC,OADf,CAEdA,OAFc,CAEJG,eAAe,CAACC,MAAhB,CAAuB,SAACC,CAAD,QAAOA,CAAAA,CAAC,CAACC,GAAF,GAAUJ,QAAQ,CAACI,GAA1B,EAAvB,CAFI,CAGpB,MAAKC,QAAL,CAAc,CAAEP,OAAO,CAAPA,OAAF,CAAd,EAHoB,sCAKZL,CAAAA,aAAa,CAACO,QAAQ,CAACI,GAAV,CALD,QAMlBT,KAAK,CAACW,OAAN,CAAc,+BAAd,EANkB,+EAQlB,GAAI,YAAGC,QAAH,EAAe,YAAGA,QAAH,CAAYC,MAAZ,GAAuB,GAA1C,CACEb,KAAK,CAACc,KAAN,CAAY,uCAAZ,EACF,GAAI,YAAGF,QAAH,EAAe,YAAGA,QAAH,CAAYC,MAAZ,GAAuB,GAA1C,CACEb,KAAK,CAACc,KAAN,CAAY,YAAGF,QAAH,CAAYG,IAAxB,EACF,MAAKL,QAAL,CAAc,CAAEP,OAAO,CAAEG,eAAX,CAAd,EAZkB,oE,qEAetBU,U,CAAa,UAAM,CACjB,MAAKC,KAAL,CAAWC,OAAX,CAAmBC,IAAnB,CAAwB,YAAxB,EACD,C,iWApBiCpB,CAAAA,UAAU,E,yCAA5BI,O,mBAANY,I,CACR,KAAKL,QAAL,CAAc,CAAEP,OAAO,CAAPA,OAAF,CAAd,E,iNAoBO,iBACP,mBACE,4CACE,8BACE,SAAS,CAAC,qBADZ,CAEE,OAAO,CAAE,yBAAM,CAAA,MAAI,CAACa,UAAL,EAAN,EAFX,SADF,cAOE,6BAAO,SAAS,CAAC,OAAjB,eACE,8CACE,2CACE,wCADF,cAEE,qCAFF,cAGE,gDAHF,cAIE,uCAJF,CADF,CADF,cASE,iCACG,KAAKd,KAAL,CAAWC,OAAX,CAAmBiB,GAAnB,CAAuB,SAACjB,OAAD,qBACtB,0BAAI,GAAG,CAAEA,OAAO,CAACM,GAAjB,eACE,8BAAKN,OAAO,CAACkB,IAAb,CADF,cAEE,8BAAKlB,OAAO,CAACmB,IAAb,CAFF,cAGE,8BAAKnB,OAAO,CAACoB,SAAb,CAHF,cAIE,2CACE,8BACE,SAAS,CAAC,gBADZ,CAEE,OAAO,CAAE,yBAAM,CAAA,MAAI,CAACnB,mBAAL,CAAyBD,OAAzB,CAAN,EAFX,WADF,CAJF,CADsB,EAAvB,CADH,CATF,CAPF,CADF,CAqCD,C,2BA/DyBN,S,EAkE5B,cAAeI,CAAAA,aAAf","sourcesContent":["import React, { Component } from \"react\";\nimport { deleteService, getService } from \"../common/Service\";\nimport { toast } from \"react-toastify\";\n\nclass DeleteService extends Component {\n  state = { service: [] };\n\n  async componentDidMount() {\n    const { data: service } = await getService();\n    this.setState({ service });\n  }\n  handleDeleteService = async (services) => {\n    const originalService = this.state.service;\n    const service = originalService.filter((s) => s._id !== services._id);\n    this.setState({ service });\n    try {\n      await deleteService(services._id);\n      toast.success(\"This Service has been deleted\");\n    } catch (ex) {\n      if (ex.response && ex.response.status === 404)\n        toast.error(\"This Service has been already deleted\");\n      if (ex.response && ex.response.status === 400)\n        toast.error(ex.response.data);\n      this.setState({ service: originalService });\n    }\n  };\n  handleBack = () => {\n    this.props.history.push(\"/Dashboard\");\n  };\n  render() {\n    return (\n      <div>\n        <button\n          className=\"btn btn-primary m-2\"\n          onClick={() => this.handleBack()}\n        >\n          BACK\n        </button>\n        <table className=\"table\">\n          <thead>\n            <tr>\n              <th>Service</th>\n              <th>Time</th>\n              <th>Seats Available</th>\n              <th>Delete</th>\n            </tr>\n          </thead>\n          <tbody>\n            {this.state.service.map((service) => (\n              <tr key={service._id}>\n                <td>{service.name}</td>\n                <td>{service.time}</td>\n                <td>{service.seatsLeft}</td>\n                <td>\n                  <button\n                    className=\"btn btn-danger\"\n                    onClick={() => this.handleDeleteService(service)}\n                  >\n                    Delete\n                  </button>\n                </td>\n              </tr>\n            ))}\n          </tbody>\n        </table>\n      </div>\n    );\n  }\n}\n\nexport default DeleteService;\n"]},"metadata":{},"sourceType":"module"}