{"ast":null,"code":"var _jsxFileName = \"/home/kellyegesa/Desktop/Projects/ack_stpeters/src/compoments/Worshippers.jsx\";\nimport React, { Component } from \"react\";\nimport Maintable from \"../common/maintable\";\nimport { getService, deleteWorshippers } from \"../common/Worshippers\";\nimport { toast } from \"react-toastify\";\n\nclass WorshipperTable extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      worshippers: []\n    };\n\n    this.handleDeleteWorshippers = async worshipper => {\n      const originalWorshipper = this.state.worshippers;\n      const worshippers = originalWorshipper.filter(s => s._id !== worshipper._id);\n      this.setState({\n        worshippers\n      });\n\n      try {\n        await deleteWorshippers(worshipper._id);\n        toast.success(\"deleted\");\n      } catch (ex) {\n        if (ex.response && ex.response.status === 404) toast.error(\"This person has been already deleted\");\n        this.setState({\n          worshippers: originalWorshipper\n        });\n      }\n    };\n\n    this.handleBack = () => {\n      this.props.history.push(\"/Dashboard\");\n    };\n  }\n\n  async handleData() {\n    const {\n      data: worshippers\n    } = await getService(this.props.match.params.id);\n    this.setState({\n      worshippers\n    });\n  }\n\n  componentWillUnmount() {\n    this.setState = (state, callback) => {\n      return;\n    };\n  }\n\n  render() {\n    this.handleData();\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-m\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 40,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Maintable, {\n      items: this.state.worshippers,\n      toDelete: this.handleDeleteWorshippers,\n      goBack: this.handleBack,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 41,\n        columnNumber: 9\n      }\n    }));\n  }\n\n}\n\nexport default WorshipperTable;","map":{"version":3,"sources":["/home/kellyegesa/Desktop/Projects/ack_stpeters/src/compoments/Worshippers.jsx"],"names":["React","Component","Maintable","getService","deleteWorshippers","toast","WorshipperTable","state","worshippers","handleDeleteWorshippers","worshipper","originalWorshipper","filter","s","_id","setState","success","ex","response","status","error","handleBack","props","history","push","handleData","data","match","params","id","componentWillUnmount","callback","render"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,SAAP,MAAsB,qBAAtB;AACA,SAASC,UAAT,EAAqBC,iBAArB,QAA8C,uBAA9C;AACA,SAASC,KAAT,QAAsB,gBAAtB;;AAEA,MAAMC,eAAN,SAA8BL,SAA9B,CAAwC;AAAA;AAAA;AAAA,SACtCM,KADsC,GAC9B;AAAEC,MAAAA,WAAW,EAAE;AAAf,KAD8B;;AAAA,SAWtCC,uBAXsC,GAWZ,MAAOC,UAAP,IAAsB;AAC9C,YAAMC,kBAAkB,GAAG,KAAKJ,KAAL,CAAWC,WAAtC;AACA,YAAMA,WAAW,GAAGG,kBAAkB,CAACC,MAAnB,CACjBC,CAAD,IAAOA,CAAC,CAACC,GAAF,KAAUJ,UAAU,CAACI,GADV,CAApB;AAGA,WAAKC,QAAL,CAAc;AAAEP,QAAAA;AAAF,OAAd;;AAEA,UAAI;AACF,cAAMJ,iBAAiB,CAACM,UAAU,CAACI,GAAZ,CAAvB;AACAT,QAAAA,KAAK,CAACW,OAAN,CAAc,SAAd;AACD,OAHD,CAGE,OAAOC,EAAP,EAAW;AACX,YAAIA,EAAE,CAACC,QAAH,IAAeD,EAAE,CAACC,QAAH,CAAYC,MAAZ,KAAuB,GAA1C,EACEd,KAAK,CAACe,KAAN,CAAY,sCAAZ;AAEF,aAAKL,QAAL,CAAc;AAAEP,UAAAA,WAAW,EAAEG;AAAf,SAAd;AACD;AACF,KA3BqC;;AAAA,SA4BtCU,UA5BsC,GA4BzB,MAAM;AACjB,WAAKC,KAAL,CAAWC,OAAX,CAAmBC,IAAnB,CAAwB,YAAxB;AACD,KA9BqC;AAAA;;AAEtC,QAAMC,UAAN,GAAmB;AACjB,UAAM;AAAEC,MAAAA,IAAI,EAAElB;AAAR,QAAwB,MAAML,UAAU,CAAC,KAAKmB,KAAL,CAAWK,KAAX,CAAiBC,MAAjB,CAAwBC,EAAzB,CAA9C;AACA,SAAKd,QAAL,CAAc;AAAEP,MAAAA;AAAF,KAAd;AACD;;AACDsB,EAAAA,oBAAoB,GAAG;AACrB,SAAKf,QAAL,GAAgB,CAACR,KAAD,EAAQwB,QAAR,KAAqB;AACnC;AACD,KAFD;AAGD;;AAqBDC,EAAAA,MAAM,GAAG;AACP,SAAKP,UAAL;AACA,wBACE;AAAK,MAAA,SAAS,EAAC,OAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACE,oBAAC,SAAD;AACE,MAAA,KAAK,EAAE,KAAKlB,KAAL,CAAWC,WADpB;AAEE,MAAA,QAAQ,EAAE,KAAKC,uBAFjB;AAGE,MAAA,MAAM,EAAE,KAAKY,UAHf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADF,CADF;AASD;;AA1CqC;;AA6CxC,eAAef,eAAf","sourcesContent":["import React, { Component } from \"react\";\nimport Maintable from \"../common/maintable\";\nimport { getService, deleteWorshippers } from \"../common/Worshippers\";\nimport { toast } from \"react-toastify\";\n\nclass WorshipperTable extends Component {\n  state = { worshippers: [] };\n  async handleData() {\n    const { data: worshippers } = await getService(this.props.match.params.id);\n    this.setState({ worshippers });\n  }\n  componentWillUnmount() {\n    this.setState = (state, callback) => {\n      return;\n    };\n  }\n  handleDeleteWorshippers = async (worshipper) => {\n    const originalWorshipper = this.state.worshippers;\n    const worshippers = originalWorshipper.filter(\n      (s) => s._id !== worshipper._id\n    );\n    this.setState({ worshippers });\n\n    try {\n      await deleteWorshippers(worshipper._id);\n      toast.success(\"deleted\");\n    } catch (ex) {\n      if (ex.response && ex.response.status === 404)\n        toast.error(\"This person has been already deleted\");\n\n      this.setState({ worshippers: originalWorshipper });\n    }\n  };\n  handleBack = () => {\n    this.props.history.push(\"/Dashboard\");\n  };\n  render() {\n    this.handleData();\n    return (\n      <div className=\"col-m\">\n        <Maintable\n          items={this.state.worshippers}\n          toDelete={this.handleDeleteWorshippers}\n          goBack={this.handleBack}\n        />\n      </div>\n    );\n  }\n}\n\nexport default WorshipperTable;\n"]},"metadata":{},"sourceType":"module"}