{"ast":null,"code":"import _regeneratorRuntime from\"/home/kellyegesa/Desktop/Projects/ack_stpeters/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/kellyegesa/Desktop/Projects/ack_stpeters/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _objectSpread from\"/home/kellyegesa/Desktop/Projects/ack_stpeters/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"/home/kellyegesa/Desktop/Projects/ack_stpeters/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/kellyegesa/Desktop/Projects/ack_stpeters/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/kellyegesa/Desktop/Projects/ack_stpeters/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/kellyegesa/Desktop/Projects/ack_stpeters/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from\"react\";import Form from\"../common/form\";import Joi from\"joi-browser\";import Services from\"../common/testing\";import{saveWorshipper}from\"../common/Worshippers\";import{toast}from\"react-toastify\";var MainPage=/*#__PURE__*/function(_Form){_inherits(MainPage,_Form);var _super=_createSuper(MainPage);function MainPage(){var _this;_classCallCheck(this,MainPage);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={data:{firstname:\"\",lastname:\"\",email:\"\",phonenumber:\"\",dob:\"\"},errors:{}};_this.handleServicesSelect=function(service){var data=_objectSpread({},_this.state.data);data[\"service\"]=service._id;_this.setState({data:data});_this.setState({selectedService:service});};_this.schema={firstname:Joi.string().min(3).max(25).required().label(\"Firstname\").error(function(){return{message:\"Enter a valid FirstName\"};}),lastname:Joi.string().min(3).max(25).required().label(\"Lastname\").error(function(){return{message:\"Enter a valid LastName\"};}),email:Joi.string().email().label(\"Email\").error(function(){return{message:\"Enter a valid Email\"};}),phonenumber:Joi.string().min(10).max(10).regex(/^([0][7])([0-9]{8})$/).label(\"Phone Number\").error(function(){return{message:\"Enter a valid phone number\"};}),dob:Joi.number().label(\"Date of Birth\").min(1962).max(2007).error(function(){return{message:\"You do not pass age restrictions\"};}),service:Joi.required()};_this.doSubmit=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return saveWorshipper(_this.state.data);case 3:_this.props.history.push(\"/Booked\");_context.next=9;break;case 6:_context.prev=6;_context.t0=_context[\"catch\"](0);if(_context.t0.response&&_context.t0.response.status===400)toast.error(_context.t0.response.data);case 9:case\"end\":return _context.stop();}}},_callee,null,[[0,6]]);}));return _this;}_createClass(MainPage,[{key:\"render\",value:function render(){return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"m-2\"},/*#__PURE__*/React.createElement(\"h6\",{style:{textAlign:\"center\"}},\"ACK ST PETERS KAHAWA SUKARI \",/*#__PURE__*/React.createElement(\"br\",null),\" SUNDAY SERVICE BOOKING \",/*#__PURE__*/React.createElement(\"br\",null)),\"Kindly fill the form to reserve your seat from the comfort of your home\"),/*#__PURE__*/React.createElement(\"form\",{onSubmit:this.handleSubmit},/*#__PURE__*/React.createElement(\"div\",{className:\"form-row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col\"},this.renderInput(\"firstname\",\"First Name\")),/*#__PURE__*/React.createElement(\"div\",{className:\"col\"},this.renderInput(\"lastname\",\"Last Name\"))),this.renderInput(\"email\",\"Email\",\"email\"),/*#__PURE__*/React.createElement(\"div\",{className:\"form-row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col\"},this.renderInput(\"phonenumber\",\"Phone Number\")),/*#__PURE__*/React.createElement(\"div\",{className:\"col\"},this.renderInput(\"dob\",\"Year of Birth\"))),/*#__PURE__*/React.createElement(Services,{onTry:this.state.data.service,selectedItem:this.state.selectedService,onItemSelect:this.handleServicesSelect}),this.renderButton(\"BOOK\")));}}]);return MainPage;}(Form);export default MainPage;","map":{"version":3,"sources":["/home/kellyegesa/Desktop/Projects/ack_stpeters/src/compoments/load.jsx"],"names":["React","Form","Joi","Services","saveWorshipper","toast","MainPage","state","data","firstname","lastname","email","phonenumber","dob","errors","handleServicesSelect","service","_id","setState","selectedService","schema","string","min","max","required","label","error","message","regex","number","doSubmit","props","history","push","response","status","textAlign","handleSubmit","renderInput","renderButton"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport Form from \"../common/form\";\nimport Joi from \"joi-browser\";\nimport Services from \"../common/testing\";\nimport { saveWorshipper } from \"../common/Worshippers\";\nimport { toast } from \"react-toastify\";\n\nclass MainPage extends Form {\n  state = {\n    data: {\n      firstname: \"\",\n      lastname: \"\",\n      email: \"\",\n      phonenumber: \"\",\n      dob: \"\",\n    },\n    errors: {},\n  };\n  handleServicesSelect = (service) => {\n    const data = { ...this.state.data };\n    data[\"service\"] = service._id;\n    this.setState({ data });\n    this.setState({ selectedService: service });\n  };\n  schema = {\n    firstname: Joi.string()\n      .min(3)\n      .max(25)\n      .required()\n      .label(\"Firstname\")\n      .error(() => {\n        return {\n          message: \"Enter a valid FirstName\",\n        };\n      }),\n    lastname: Joi.string()\n      .min(3)\n      .max(25)\n      .required()\n      .label(\"Lastname\")\n      .error(() => {\n        return {\n          message: \"Enter a valid LastName\",\n        };\n      }),\n    email: Joi.string()\n      .email()\n      .label(\"Email\")\n      .error(() => {\n        return {\n          message: \"Enter a valid Email\",\n        };\n      }),\n    phonenumber: Joi.string()\n      .min(10)\n      .max(10)\n      .regex(/^([0][7])([0-9]{8})$/)\n      .label(\"Phone Number\")\n      .error(() => {\n        return {\n          message: \"Enter a valid phone number\",\n        };\n      }),\n    dob: Joi.number()\n      .label(\"Date of Birth\")\n      .min(1962)\n      .max(2007)\n      .error(() => {\n        return {\n          message: \"You do not pass age restrictions\",\n        };\n      }),\n    service: Joi.required(),\n  };\n  doSubmit = async () => {\n    try {\n      await saveWorshipper(this.state.data);\n      this.props.history.push(\"/Booked\");\n    } catch (ex) {\n      if (ex.response && ex.response.status === 400)\n        toast.error(ex.response.data);\n    }\n  };\n  render() {\n    return (\n      <div>\n        <div className=\"m-2\">\n          <h6 style={{ textAlign: \"center\" }}>\n            ACK ST PETERS KAHAWA SUKARI <br /> SUNDAY SERVICE BOOKING <br />\n          </h6>\n          Kindly fill the form to reserve your seat from the comfort of your\n          home\n        </div>\n        <form onSubmit={this.handleSubmit}>\n          <div className=\"form-row\">\n            <div className=\"col\">\n              {this.renderInput(\"firstname\", \"First Name\")}\n            </div>\n            <div className=\"col\">\n              {this.renderInput(\"lastname\", \"Last Name\")}\n            </div>\n          </div>\n          {this.renderInput(\"email\", \"Email\", \"email\")}\n          <div className=\"form-row\">\n            <div className=\"col\">\n              {this.renderInput(\"phonenumber\", \"Phone Number\")}\n            </div>\n            <div className=\"col\">\n              {this.renderInput(\"dob\", \"Year of Birth\")}\n            </div>\n          </div>\n          <Services\n            onTry={this.state.data.service}\n            selectedItem={this.state.selectedService}\n            onItemSelect={this.handleServicesSelect}\n          />\n          {this.renderButton(\"BOOK\")}\n        </form>\n      </div>\n    );\n  }\n}\nexport default MainPage;\n"]},"metadata":{},"sourceType":"module"}